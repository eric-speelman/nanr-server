<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Tag Test</title>
    <style>
        body {
            background-color: #ffaaaa;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <h1>Tag Test</h1>
    <div>Above</div>
    <div nanr-id="eric" nanr-pageid="pageId"></div>
    <div>Below</div>
    <div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div><div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div>
    <div>saas;askljaslkdjsa</div>
    <div nanr-id="eric" nanr-pageid="pageId"></div>
    <div>saas;askljaslkdjsa</div>
    <button onclick="test()">Test</button>
    <script>
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }
        var url = 'https://app.nanr.io';
        var env = getUrlParameter('env');
        var wall = parseInt(getUrlParameter('wall'));
        if (env === 'dev') {
            url = 'http://localhost:4200';
        } else if (env === 'test') {
            url = 'https://app.test.nanr.io';
        }
        url = url + '/assets/tags/nanr.js';
        var el = document.createElement('script');
        el.src = url
        document.body.appendChild(el);
        if (wall && wall > 0) {
            setWall();
        }
        setCallback();
        function setWall() {
            if (window.nanr) {
                nanr.require({
                    username: 'test',
                    pageCnt: wall,
                    pageId: 'some-page',
                    background: 'lines'
                });
            } else {
                setTimeout(setWall, 100);
            }
        }
        function setCallback() {
            if (window.nanr) {
                nanr.onNanr((msg) => {
                    console.log(msg);
                });
            } else {
                setTimeout(setCallback, 100);
            }
        }
    </script>
</body>
</html>